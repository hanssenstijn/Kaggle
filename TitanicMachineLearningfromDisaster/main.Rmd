---
title: "Titanic Machine learning from disaster"
author: "Stijn Hanssen"
date: "30 October 2018"
output: html_document
---

### Clear working space
First step is to make sure that the working space is empty.
```{r}
# clear all variables
rm(list=ls()) 
```

### Load packages
Loading the required packages for specific functions.
```{r}
if (!require("pacman")) suppressPackageStartupMessages(install.packages("pacman"))
pacman::p_load(GLDEX,dplyr,mice,VIM)
```

### Set working directory
Choose the path were the data-sets are stored
```{r}
DATA.DIR <- "~/GitHub/Kaggle/TitanicMachineLearningfromDisaster"
setwd(DATA.DIR)
# See which files are in WD
list.files() 
```

### Import data
The training and test set will be imported into R.
```{r}
train <- read.csv("train.csv",stringsAsFactors = F,header = T)
test <- read.csv("test.csv", stringsAsFactors =  F,header = T)
```

### Inspect training data
Firstly we look at the data structure, to see which variables we have. 
```{r}
str(train)
summary(train)
head(train)
tail(train)
```

### Setting the columns to factors
All these columns have different levels
```{r}
train$Pclass <- as.factor(train$Pclass)
train$Sex <- as.factor(train$Sex)
train$Embarked <- as.factor(train$Embarked)
str(train)
```


### Investigate specific columns 
```{r}
# check at which places there are missing values for age
which.na(train$Age)
# at what place did people entered the ship
table(train$Embarked)
which(train$Embarked == '')
# filter based on paid nothing for the titanic
Fare <- filter(train, Fare == 0.00)
# every person who paided nothing is a man who embarked at S (southampton) it is mentioned that this is the place were the crew boarded
Fare
# cabin column misses alot information
train$Cabin
```

### Missing values age
```{r}
trainage <- train[,c("Age","Survived","Pclass","Sex","SibSp","Parch","Fare")]
tempData <- mice(trainage,m=5,maxit=50,meth='pmm',seed=500)
summary(tempData)
tempData$imp$Age
completedData <- complete(tempData,1)
train$Age <- completedData$Age
which.na(train$Age)
```

### Missing values embarked
Assigning the most often occuring character to the two missing values 
```{r}
train$Embarked[c(62,830)] <- 'S'
table(train$Embarked)
```


